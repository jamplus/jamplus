<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>C/C++ Rules</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.8.18 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">C/C++ Rules </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The C module provides rules to build C, C++, Objective C, and Objective C++ applications, shared libraries, and static libraries.</p>
<p>When first loaded, it attempts to detect the compiler on the machine. On Windows, it can successfully detect and run Visual Studio 2015/2013/2012/2010/2008/2005/2003 and Visual C++ 6. MinGW can also be specified. On other OSes, it attempts to detect GCC.</p>
<p>Support for more than one toolchain used during the same Jam execution is provided via the <a class="el" href="module_c_multiple_toolchain_support.html">C Module Multiple Toolchain Support</a>.</p>
<h1><a class="anchor" id="module_c_ruleslist"></a>
List of Rules</h1>
<div>
<ul class="multicol">
<li><a href="module_c.html#rule_C_AddBuildExtensions">C.AddBuildExtensions</a></li>
<li><a href="module_c.html#rule_C_ActiveTarget">C.ActiveTarget</a></li>
<li><a href="module_c.html#rule_C_AddFlags">C.AddFlags</a></li>
<li><a href="module_c.html#rule_C_Application">C.Application</a></li>
<li><a href="module_c.html#rule_C_BatchCompileGroupSize">C.BatchCompileGroupSize</a></li>
<li><a href="module_c.html#rule_C_CFlags">C.CFlags</a></li>
<li><a href="module_c.html#rule_C_Clean">C.Clean</a></li>
<li><a href="module_c.html#rule_C_ConfigureFile">C.ConfigureFile</a></li>
<li><a href="module_c.html#rule_C_CppExceptions">C.C++Exceptions</a></li>
<li><a href="module_c.html#rule_C_CppFlags">C.C++Flags</a></li>
<li><a href="module_c.html#rule_C_CompileOptions">C.CompileOptions</a></li>
<li><a href="module_c.html#rule_C_DefFile">C.DefFile</a></li>
<li><a href="module_c.html#rule_C_Defines">C.Defines</a></li>
<li><a href="module_c.html#rule_C_ExcludeFromBuild">C.ExcludeFromBuild</a></li>
<li><a href="module_c.html#rule_C_Flags">C.Flags</a></li>
<li><a href="module_c.html#rule_C_ForceFileType">C.ForceFileType</a></li>
<li><a href="module_c.html#rule_C_ForceInclude">C.ForceInclude</a></li>
<li><a href="module_c.html#rule_C_ForcePublic">C.ForcePublic</a></li>
<li><a href="module_c.html#rule_C_GetActiveToolchain">C.GetActiveToolchain</a></li>
<li><a href="module_c.html#rule_C_GetArchitecture">C.GetArchitecture</a></li>
<li><a href="module_c.html#rule_C_GetLinkTargets">C.GetLinkTargets</a></li>
<li><a href="module_c.html#rule_C_GristTarget">C.GristTarget</a></li>
<li><a href="module_c.html#rule_C_GristFiles">C.GristFiles</a></li>
<li><a href="module_c.html#rule_C_IncludeDirectories">C.IncludeDirectories</a></li>
<li><a href="module_c.html#rule_C_IncludeInBuild">C.IncludeInBuild</a></li>
<li><a href="module_c.html#rule_C_Inherits">C.Inherits</a></li>
<li><a href="module_c.html#rule_C_InstallNamePath">C.InstallNamePath</a></li>
<li><a href="module_c.html#rule_C_LibFlags">C.LibFlags</a></li>
<li><a href="module_c.html#rule_C_Library">C.Library</a></li>
<li><a href="module_c.html#rule_C_LinkDirectories">C.LinkDirectories</a></li>
<li><a href="module_c.html#rule_C_LinkFlags">C.LinkFlags</a></li>
<li><a href="module_c.html#rule_C_LinkLibraries">C.LinkLibraries</a></li>
<li><a href="module_c.html#rule_C_LinkPrebuiltLibraries">C.LinkPrebuiltLibraries</a></li>
<li><a href="module_c.html#rule_C_Lump">C.Lump</a></li>
<li><a href="module_c.html#rule_C_NoPrecompiledHeader">C.NoPrecompiledHeader</a></li>
<li><a href="module_c.html#rule_C_ObjectAddFlags">C.ObjectAddFlags</a></li>
<li><a href="module_c.html#rule_C_ObjectCFlags">C.ObjectCFlags</a></li>
<li><a href="module_c.html#rule_C_ObjectCppFlags">C.ObjectC++Flags</a></li>
<li><a href="module_c.html#rule_C_ObjectDefines">C.ObjectDefines</a></li>
<li><a href="module_c.html#rule_C_ObjectForceInclude">C.ObjectForceInclude</a></li>
<li><a href="module_c.html#rule_C_ObjectIncludeDirectories">C.ObjectIncludeDirectories</a></li>
<li><a href="module_c.html#rule_C_OverrideToolchainSpec">C.OverrideToolchainSpec</a></li>
<li><a href="module_c.html#rule_C_OutputName">C.OutputName</a></li>
<li><a href="module_c.html#rule_C_OutputPath">C.OutputPath</a></li>
<li><a href="module_c.html#rule_C_OutputPostfix">C.OutputPostfix</a></li>
<li><a href="module_c.html#rule_C_OutputPostfixClear">C.OutputPostfixClear</a></li>
<li><a href="module_c.html#rule_C_ObjectRemoveFlags">C.ObjectRemoveFlags</a></li>
<li><a href="module_c.html#rule_C_OutputSuffix">C.OutputSuffix</a></li>
<li><a href="module_c.html#rule_C_PrecompiledHeader">C.PrecompiledHeader</a></li>
<li><a href="module_c.html#rule_C_RemoveFlags">C.RemoveFlags</a></li>
<li><a href="module_c.html#rule_C_RuntimeType">C.RuntimeType</a></li>
<li><a href="module_c.html#rule_C_Toolchain">C.Toolchain</a></li>
<li><a href="module_c.html#rule_LocateSource">LocateSource</a></li>
<li><a href="module_c.html#rule_LocateTarget">LocateTarget</a></li>
</ul>
</div>
<h1><a class="anchor" id="module_c_rules"></a>
Rules</h1>
<hr  />
 <h1><a class="anchor" id="rule_C_ActiveTarget"></a>
rule C.ActiveTarget TARGET</h1>
<p><a name="a90_rule_C_ActiveTarget"></a></p>
<p>Changes the active target to <code>TARGET</code>. All rules taking an optional <code>TARGET</code> parameter will default to the active target if empty.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to become active.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the newly activated target.</dd></dl>
<div class="fragment"><div class="line">C.ActiveTarget MyApplication ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_AddBuildExtensions"></a>
rule C.AddBuildExtensions TYPE : EXTS : RULE : SUFOBJ : ADD_TO_EXTENSIONS : ADD_TO_LINK</h1>
<p><a name="a91_rule_C_AddBuildExtensions"></a></p>
<p>Makes a new C/C++ source extensions available to the compiler. This rule requires some additional setup, described below.</p>
<p>TODO: Finish me.</p>
<p><code>TYPE</code> identifies a category of files and is a short identifier, usually all caps. It is used to access compiler flags variables during a file's compilation. If <code>TYPE</code> were specified as <code>CC</code>, then the compiler flags in the variables called <code>preCCFLAGS</code>, <code>CCFLAGS</code>, <code>SUBDIRCCFLAGS</code>, and <code>PCHCCFLAGS</code> would be used.</p>
<hr  />
 <h1><a class="anchor" id="rule_C_AddFlags"></a>
rule C.AddFlags TARGET : FLAGS</h1>
<p><a name="a92_rule_C_AddFlags"></a></p>
<p>For the given project <code>TARGET</code>, add the compilation <code>FLAGS</code> for the current toolchain.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to add the <code>FLAGS</code> to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. If <code>TARGET</code> is <code>*</code>, the flags are made available globally. </td></tr>
    <tr><td class="paramname">FLAGS</td><td>The list of flags to add.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">C.AddFlags : -g ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_Application"></a>
rule C.Application TARGET : SOURCES [ : OPTIONS ]</h1>
<p><a name="a93_rule_C_Application"></a></p>
<p>Compiles <code>SOURCES</code> and links them into <code>TARGET</code>. Platform specific <code>.o</code> files or, on Visual C++ compilers, <code>.res</code> files are passed straight through to the linker. Any file excluded from the build via <a class="el" href="module_c.html#rule_C_ExcludeFromBuild">rule C.ExcludeFromBuild TARGET : SOURCES</a> is ignored.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to link <code>SOURCES</code> into. The target name is given without extension. A platform specific extension will be generated, often reflecting a configuration type. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SOURCES</td><td>The list of <code>.cpp</code>, <code>.cxx</code>, and <code>.c</code> (and possibly others) files to link into the application. Object and compiled Windows resource files may also be passed with this list. </td></tr>
    <tr><td class="paramname">OPTIONS</td><td>The following options are available. All options are optional.</td></tr>
  </table>
  </dd>
</dl>
<p> <blockquote>  </p><ul>
<li>
<code>windows</code> - Forces a GUI application. On Windows, the application must have a <code>WinMain</code> function. For Visual C++, the executable is linked with <code>/SUBSYSTEM:WINDOWS</code>. </li>
<li>
<code>console</code> (default) - Builds a console application. For Visual C++, the executable is linked with <code>/SUBSYSTEM:CONSOLE</code>. </li>
</ul>
<p> </blockquote> </p>
<dl class="section return"><dt>Returns</dt><dd>Returns the list of link targets, sometimes more than one, that will be built by the Jam.</dd></dl>
<div class="fragment"><div class="line">C.Application helloworld : helloworld.cpp ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_BatchCompileGroupSize"></a>
rule C.BatchCompileGroupSize TARGET [ : SIZE ]</h1>
<p><a name="a94_rule_C_BatchCompileGroupSize"></a></p>
<p>For the given project <code>TARGET</code>, only allow <code>SIZE</code> files to be batch compiled in a given compiler execution.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to assign the <code>SIZE</code> information to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SIZE</td><td>(optional) The maximum number of files to allow to compile on a given compiler execution. If not specified, there is no limit to the number of batch compiled files.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># wxLua takes so long to build that we don&#39;t properly take advantage of</span></div>
<div class="line"><span class="preprocessor"># multithreading without splitting up the build some.</span></div>
<div class="line"><span class="preprocessor">C.BatchCompileGroupSize wxLua : 5 ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_CFlags"></a>
rule C.CFlags TARGET : FLAGS</h1>
<p><a name="a95_rule_C_CFlags"></a></p>
<p>For the given project <code>TARGET</code>, assign the <code>FLAGS</code> to the appropriate configuration and platform.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to assign the <code>FLAGS</code> to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. If <code>TARGET</code> is <code>*</code>, the flags are made available globally. </td></tr>
    <tr><td class="paramname">FLAGS</td><td>The list of flags to apply.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Assign /clr:oldsyntax to all C files in managedapp across all</span></div>
<div class="line"><span class="preprocessor"># configurations and platforms.</span></div>
<div class="line">C.CFlags managedapp : /clr:oldsyntax ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Assign /clr:oldsyntax to all C files in managedapp for the debug</span></div>
<div class="line"><span class="preprocessor"># configuration and all platforms.</span></div>
<div class="line">C.CFlags managedapp : /clr:oldsyntax : debug ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Assign /clr:oldsyntax to all C files in managedapp for the debug</span></div>
<div class="line"><span class="preprocessor"># configuration and win32 platform.</span></div>
<div class="line"><span class="preprocessor">C.CFlags managedapp : /clr:oldsyntax : debug : win32 ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_Clean"></a>
rule C.Clean TARGET : FILES</h1>
<p><a name="a96_rule_C_Clean"></a></p>
<p>Add <code>FILES</code> to the <code>clean</code> target for <code>TARGET</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to add <code>FILES</code> to for cleaning. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">FILES</td><td>The files to clean.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">C.Clean : $(generatedheader) ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_CppExceptions"></a>
rule C.C++Exceptions TARGET : TYPE</h1>
<p><a name="a97_rule_C_C:2b:2bExceptions"></a></p>
<p>For the given project <code>TARGET</code>, turn on/off C++ exception support within the current toolchain.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to assign the <code>FLAGS</code> to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. If <code>TARGET</code> is <code>*</code>, the flags are made available globally. </td></tr>
    <tr><td class="paramname">TYPE</td><td><code>true</code> to turn on exceptions, <code>false</code> (default) to turn off exceptions.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Turn on exceptions in the target mycppapp.</span></div>
<div class="line">C.C++Exceptions mycppapp : true ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Turn off exceptions in the target mycppapp for all configs.</span></div>
<div class="line"><span class="preprocessor">C.C++Exceptions mycppapp : false ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_CppFlags"></a>
rule C.C++Flags TARGET : FLAGS</h1>
<p><a name="a98_rule_C_CppFlags"></a></p>
<p>For the given project <code>TARGET</code>, assign the C++ <code>FLAGS</code> for the current toolchain.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to assign the <code>FLAGS</code> to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. If <code>TARGET</code> is <code>*</code>, the flags are made available globally. </td></tr>
    <tr><td class="paramname">FLAGS</td><td>The list of flags to apply.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Assign /clr:oldsyntax to all C++ files in managedapp.</span></div>
<div class="line"><span class="preprocessor">C.C++Flags managedapp : /clr:oldsyntax ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_CompileOptions"></a>
rule C.CompileOptions OPTIONS</h1>
<p><a name="a99_rule_C_CompileOptions"></a></p>
<p>Sets options that affect how the compiler builds.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">OPTIONS</td><td>The following options are available.</td></tr>
  </table>
  </dd>
</dl>
<p> <blockquote>  </p><ul>
<li>
<code>outputastree</code> - Set this if you want object files to be put in subdirectories matching the directory hierarchy of the source files. <code>..</code> directory entries are changed to <code>__</code> so the object files stay within the build hierarchy. The default is to put all object files in one flat directory per project. </li>
</ul>
<p> </blockquote> </p>
<div class="fragment"><div class="line">C.CompileOptions outputastree ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_ConfigureFile"></a>
rule C.ConfigureFile TARGET : DESTINATION : SOURCE : OPTIONS</h1>
<p><a name="a100_rule_C_ConfigureFile"></a></p>
<p>For the given <code>TARGET</code>, run the file specified through <code>SOURCE</code> through a CMake-like configure mechanism and output the file to <code>DESTINATION</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to do the processing within. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">DESTINATION</td><td>The destination filename to output the configured file to. The default output directory is <code>$(LOCATE_SOURCE)</code>. </td></tr>
    <tr><td class="paramname">SOURCE</td><td>The source filename to configure. The default search directory is <code>$(SEARCH_SOURCE)</code>. </td></tr>
    <tr><td class="paramname">OPTIONS</td><td>Either <code>addinclude</code> to add the <code>DESTINATION</code> <code>$(LOCATE)</code> directory to the private include paths or <code>addpublicinclude</code> to add it to the public include paths for inheritance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>An example is found at <code>tests/configurefile/</code>.</dd></dl>
<div class="fragment"><div class="line">C.ConfigureFile test : config.h : config.h.in : addinclude ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_DefFile"></a>
rule C.DefFile TARGET : SOURCES</h1>
<p><a name="a101_rule_C_DefFile"></a></p>
<p>When linking the given <code>TARGET</code>, link the <code>.def</code> file(s) specified in <code>SOURCES</code>.</p>
<dl class="section note"><dt>Note</dt><dd>At this time, the def file only affects Visual C++ applications.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to link the def file to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SOURCES</td><td>One or more <code></code>.def files. <code></code>.def files are searched for in <code></code>.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Build WorkspaceWhiz.def as part of the WorkspaceWhiz target.</span></div>
<div class="line"><span class="preprocessor">C.DefFile WorkspaceWhiz : WorkspaceWhiz.def ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_Defines"></a>
rule C.Defines TARGET : DEFINES [ : OPTIONS ]</h1>
<p><a name="a102_rule_C_Defines"></a></p>
<p>Assign the <code>DEFINES</code> to the given project <code>TARGET</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to assign the <code>DEFINES</code> to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. If <code>TARGET</code> is <code>*</code>, the defines are made available globally. </td></tr>
    <tr><td class="paramname">DEFINES</td><td>The list of defines to apply. </td></tr>
    <tr><td class="paramname">OPTIONS</td><td>If <code>public</code> is specified, the defines specified by <code>DEFINES</code> are made available to a project using <code>C.Inherits</code>.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Make #defines available for ABC and DEF=5 in someproject for all</span></div>
<div class="line"><span class="preprocessor"># configurations and all platforms.</span></div>
<div class="line">C.Defines someproject : ABC DEF=5 ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># For the win32 platform, add a WIN32 define globally.</span></div>
<div class="line"><span class="keywordflow">if</span> $(C.PLATFORM) = win32 {</div>
<div class="line">    C.Defines * : WIN32 ;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Quote a #define, keeping the quotes for compilation:</span></div>
<div class="line">C.Defines luacom : LUA5 <span class="stringliteral">&quot;LUACOM_DLL=\\\&quot;luacom.dll\\\&quot;&quot;</span> ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Add GHI to myproject and make it available to C.Inherits users.</span></div>
<div class="line"><span class="preprocessor">C.Defines someproject : GHI : public ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_ExcludeFromBuild"></a>
rule C.ExcludeFromBuild TARGET : SOURCES</h1>
<p><a name="a103_rule_C_ExcludeFromBuild"></a></p>
<p>For the given project <code>TARGET</code>, exclude the <code>SOURCES</code> from the build. If using <b>JamToWorkspace</b> for project generation, sources must be excluded and not simply removed from the list. Otherwise, they don't all show in the generated projects.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to exclude the <code>SOURCES</code> from. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SOURCES</td><td>The list of defines to exclude.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> $(PLATFORM) != xbox</div>
<div class="line">{</div>
<div class="line">    C.ExcludeFromBuild myproject : $(XBOX_SRCS) ;</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_Flags"></a>
rule C.Flags TYPE : TARGET : FLAGS</h1>
<p><a name="a104_rule_C_Flags"></a></p>
<p>Assign the compilation <code>FLAGS</code> to the project <code>TARGET</code>. <code>TYPE</code> can be any known source compilation type, such as <code>CC</code> for C-style files, <code>C++</code> for C++-style files, and on certain compilers, <code>M</code> for Objective C files, or <code>MM</code> for Objective C++ files.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TYPE</td><td>A source compilation type added through <a class="el" href="module_c.html#rule_C_AddBuildExtensions">C.AddBuildExtensions</a>. If more than one is specified, the flags are applied to all types. </td></tr>
    <tr><td class="paramname">TARGET</td><td>The target to assign the <code>FLAGS</code> to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. If <code>TARGET</code> is <code>*</code>, the flags are made available globally. </td></tr>
    <tr><td class="paramname">FLAGS</td><td>The list of flags to apply.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> $(C.PLATFORM) = macosx32  &amp;&amp;  $(C.CONFIG) = debug {</div>
<div class="line">    C.Flags CC  : * : -g -O0 -arch i386 ;</div>
<div class="line">    C.Flags C++ : * : -g -O0 -arch i386 ;</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_ForceFileType"></a>
rule C.ForceFileType TARGET : SOURCES : FILE_TYPE</h1>
<p><a name="a105_rule_C_ForceFileType"></a></p>
<p>Force the <code>FILE_TYPE</code> of the provided <code>SOURCES</code> attached to <code>TARGET</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to use when forcing the file type of <code>SOURCES</code>. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SOURCES</td><td>The list of files to affect the compilation type of. </td></tr>
    <tr><td class="paramname">FILE_TYPE</td><td>A known extension, such as <code>.c</code>, <code>.cpp</code>, <code>.m</code>, or <code>.mm</code>, to force the <code>SOURCES</code> to be interpreted as.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">C.ForceFileType : Application.cpp : .mm ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_ForceInclude"></a>
rule C.ForceInclude TARGET : INCLUDES</h1>
<p><a name="a106_rule_C_ForceInclude"></a></p>
<p>For the given project <code>TARGET</code>, assign the <code>INCLUDES</code> for the current toolchain causing that project's compilation to force the inclusion of the header before anything else.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to assign the <code>INCLUDES</code> to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. If <code>TARGET</code> is <code>*</code>, the defines are made available globally. </td></tr>
    <tr><td class="paramname">INCLUDES</td><td>The list of header files to force include.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Automatically #include myheader.h for all source files listed in myproject.</span></div>
<div class="line"><span class="preprocessor">C.ForceInclude myproject : myheader.h ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_ForcePublic"></a>
rule C.ForcePublic TARGET</h1>
<p><a name="a107_rule_C_ForcePublic"></a></p>
<p>Force the <a class="el" href="module_c.html#rule_C_Inherits">rule C.Inherits TARGET : INHERITS_TARGETS [ : OPTIONS ]</a> public inheritance pattern for <code>TARGET</code>. This will treat <code>TARGET</code> as if one of the flag setting functions, such as <a class="el" href="module_c.html#rule_C_Defines">rule C.Defines TARGET : DEFINES [ : OPTIONS ]</a> or <a class="el" href="module_c.html#rule_C_IncludeDirectories">rule C.IncludeDirectories TARGET : INCLUDEPATHS [ : OPTIONS ]</a>, had been called with <code>public</code> <code>OPTIONS</code>.</p>
<p><code>C.ForcePublic</code> is usually used in situations where <a class="el" href="module_c.html#rule_C_Inherits">rule C.Inherits TARGET : INHERITS_TARGETS [ : OPTIONS ]</a> is called with <code>TARGET</code> to inherit from, but <code>TARGET</code> has no public defines or include directories or other flags. <code>C.Inherits</code> will abort as a precautionary measure assuming that Jam has not yet defined <code>TARGET</code> yet.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to force to public.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">C.ForcePublic MyLibrary ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_GetArchitecture"></a>
rule C.GetArchitecture TOOLCHAIN_SPEC</h1>
<p><a name="a108_rule_C_GetArchitecture"></a></p>
<p>Retrieves the <code>C.ARCHITECTURE</code> assigned to the specified toolchain.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TOOLCHAIN_SPEC</td><td>A toolchain spec. Defaults to the current toolchain. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the toolchain's architecture.</dd></dl>
<div class="fragment"><div class="line">Echo Architecture - [ C.GetArchitecture ] ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_GetLinkTargets"></a>
rule C.GetLinkTargets TARGET : TOOLCHAIN_SPEC</h1>
<p><a name="a109_rule_C_GetLinkTargets"></a></p>
<p>The <a class="el" href="module_c.html#rule_C_Application">rule C.Application TARGET : SOURCES [ : OPTIONS ]</a> and <a class="el" href="module_c.html#rule_C_Library">rule C.Library TARGET : SOURCES [ : OPTIONS ]</a> rules return the target name of the executable or library being built. The properly gristed target name is unique within the dependency graph and takes into account the currently active toolchain.</p>
<p>When it is not possible to save off the result when calling the <code>C.Application</code> or <code>C.Library</code> rules, the <code>C.GetLinkTargets</code> rule can retrieve the properly gristed target later.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to retrieve the link targets from. </td></tr>
    <tr><td class="paramname">TOOLCHAIN_SPEC</td><td>A tool specification such as <code>win32/debug</code> or <code>$(PLATFORM)/$(CONFIG)/spu</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the list of link targets, sometimes more than one, that will be built by the Jam. The target list may be passed to another rule like <a class="el" href="module_c.html#rule_C_LinkLibraries">rule C.LinkLibraries TARGET : LIBRARIES [ : OPTIONS ]</a>.</dd></dl>
<div class="fragment"><div class="line">C.Toolchain ps3/debug/spu ;</div>
<div class="line">local sputhing_library = [ C.Library sputhing : sputhing.c ] ;</div>
<div class="line"> </div>
<div class="line">C.Toolchain ps3/debug/ppu ;</div>
<div class="line"> </div>
<div class="line">local also_sputhing_library = [ C.GetLinkTargets sputhing : ps3/debug/spu ] ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># &lt;ps3!release!spu:sputhing&gt;sputhing.lib</span></div>
<div class="line">Echo sputhing_library - $(sputhing_library) ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># &lt;ps3!release!spu:sputhing&gt;sputhing.lib</span></div>
<div class="line">Echo also_sputhing_library - $(also_sputhing_library) ;</div>
<div class="line"> </div>
<div class="line">C.LinkLibraries pputhing : $(sputhing_library) ;</div>
<div class="line">C.Application pputhing : pputhing.c ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_GetActiveToolchain"></a>
rule C.GetActiveToolchain</h1>
<p><a name="a110_rule_C_GetActiveToolchain"></a></p>
<dl class="section return"><dt>Returns</dt><dd>Returns the active toolchain.</dd></dl>
<div class="fragment"><div class="line">local saveActiveToolchain = [ C.GetActiveToolchain ] ;</div>
<div class="line">local toolchainsUsed = [ BuildSimple $(saveActiveToolchain)@C.ARCHITECTURE=arm64 ] ;</div>
<div class="line">toolchainsUsed += [ BuildSimple $(saveActiveToolchain)@C.ARCHITECTURE=armv7 ] ;</div>
<div class="line">C.Toolchain $(saveActiveToolchain) ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_GristFiles"></a>
rule C.GristFiles TARGET : FILES</h1>
<p><a name="a111_rule_C_GristFiles"></a></p>
<p>Grists the passed in <code>FILES</code> against <code>TARGET</code> and returns them to the user in the form: <code>&lt;win32/debug:TARGET&gt;FILES</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to grist. May be <code>*</code>. </td></tr>
    <tr><td class="paramname">FILES</td><td>The list of files to apply the target grist to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the gristed <code>FILES</code>.</dd></dl>
<div class="fragment"><div class="line"><span class="preprocessor"># &lt;platform/config:Application&gt;filea.cpp &lt;platform/config:Application&gt;fileb.cpp</span></div>
<div class="line"><span class="preprocessor">Echo Gristed files - [ C.GristFiles Application : filea.cpp fileb.cpp ] ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_GristTarget"></a>
rule C.GristTarget TARGET</h1>
<p><a name="a112_rule_C_GristTarget"></a></p>
<p>Grists the passed in <code>TARGET</code> and returns it to the user in the form: <code>&lt;win32/debug&gt;TARGET</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to grist. May be <code>*</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the gristed <code>TARGET</code>.</dd></dl>
<div class="fragment"><div class="line"><span class="preprocessor"># &lt;platform/config&gt;Application</span></div>
<div class="line"><span class="preprocessor">Echo Gristed target - [ C.GristTarget Application ] ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_IncludeDirectories"></a>
rule C.IncludeDirectories TARGET : INCLUDEPATHS [ : OPTIONS ]</h1>
<p><a name="a113_rule_C_IncludeDirectories"></a></p>
<p>Add the <code>INCLUDEPATHS</code> to the given project <code>TARGET</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to assign the <code>INCLUDEPATHS</code> to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. If <code>TARGET</code> is <code>*</code>, the defines are made available globally. </td></tr>
    <tr><td class="paramname">INCLUDEPATHS</td><td>The list of include paths to apply. </td></tr>
    <tr><td class="paramname">OPTIONS</td><td>If <code>public</code> is specified, the paths specified by <code>INCLUDEPATHS</code> are made available to a project using <code>C.Inherits</code>.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Add $(Code)/Shared as an include path to myproject.</span></div>
<div class="line">C.IncludeDirectories myproject : $(Code)/Shared ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># For the win32 platform, add the MFC include path.</span></div>
<div class="line">C.IncludeDirectories myproject : <span class="stringliteral">&quot;$(MSVCNT)/atlmfc/include&quot;</span> ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Add $(Code)/Shared to myproject and make it available to C.Inherits users.</span></div>
<div class="line"><span class="preprocessor">C.IncludeDirectories myproject : $(Code)/Shared : public ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_IncludeInBuild"></a>
rule C.IncludeInBuild TARGET : SOURCES</h1>
<p><a name="a114_rule_C_IncludeInBuild"></a></p>
<p>For the given project <code>TARGET</code>, re-include the <code>SOURCES</code> into the build.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to include the <code>SOURCES</code> from. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SOURCES</td><td>The list of source files to force include</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> $(PLATFORM) != xbox</div>
<div class="line">{</div>
<div class="line">    C.ExcludeFromBuild myproject : $(XBOX_SRCS) ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">    # Probably will result in compilation errors on non-xbox platforms.</span></div>
<div class="line">    C.IncludeInBuild myproject : $(XBOX_SRCS) ;</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_Inherits"></a>
rule C.Inherits TARGET : INHERITS_TARGETS [ : OPTIONS ]</h1>
<p><a name="a115_rule_C_Inherits"></a></p>
<p>Inherits the settings from <code>INHERITS_TARGETS</code> and apply them to <code>TARGET</code>.</p>
<ul>
<li>
All include directories made public via <code>C.IncludeDirectories</code> are inherited. If <code>OPTIONS</code> contains <code>public</code>, the include directories are made available for any <code>C.Inherits</code> utilizing this <code>TARGET</code> as an <code>INHERITS_TARGET</code>. </li>
<li>
All libraries made public via <code>C.LinkPrebuiltLibraries</code> are inherited and passed up the <code>C.Inherits</code> chain regardless of <code>OPTIONS</code> containing <code>public</code>. </li>
<li>
All libraries made public via <code>C.LinkLibraries</code> are inherited and passed up the <code>C.Inherits</code> chain regardless of <code>OPTIONS</code> containing <code>public</code>. </li>
</ul>
<p>If one of the targets specified in <code>INHERITS_TARGETS</code> has no public entries, then an error is generated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to inherit settings from <code>INHERITS_TARGETS</code> into. </td></tr>
    <tr><td class="paramname">INHERITS_TARGETS</td><td>The list of targets to inherit public settings from. </td></tr>
    <tr><td class="paramname">OPTIONS</td><td>May be empty or may contain <code>public</code>. Behavior for <code>public</code> is described above.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">C.LinkPrebuiltLibraries Misc : advapi32 shell32 user32 : public ;</div>
<div class="line">C.Inherits MiniApp : Misc ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_InstallNamePath"></a>
rule C.InstallNamePath TARGET : INSTALL_NAME_PATH</h1>
<p><a name="a116_rule_C_InstallNamePath"></a></p>
<p>On platforms with Unix-like shared libraries, <code>C.InstallNamePath</code> allows adjustment of the directory in which the shared library is allowed to run from.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to modify the install name path on. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">INSTALL_NAME_PATH</td><td>A valid path for shared libraries, such as <code>@rpath</code>.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">C.InstallNamePath : @rpath ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_LibFlags"></a>
rule C.LibFlags TARGET : FLAGS</h1>
<p><a name="a117_rule_C_LibFlags"></a></p>
<p>For the given project <code>TARGET</code>, assign the lib <code>FLAGS</code> to the current toolchain to be used when archiving object files into library files.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to assign the link <code>FLAGS</code> to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. If <code>TARGET</code> is <code>*</code>, the flags are made available globally. </td></tr>
    <tr><td class="paramname">FLAGS</td><td>The list of lib flags to apply.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">C.LibFlags * : /LTCG ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_Library"></a>
rule C.Library TARGET : SOURCES [ : OPTIONS ]</h1>
<p><a name="a118_rule_C_Library"></a></p>
<p>Compiles <code>SOURCES</code> and archives them into a library called <code>TARGET</code>. Filenames with an <code>.obj</code> or <code>.res</code> are passed straight through to the linker. Any file excluded from the build via <a class="el" href="module_c.html#rule_C_ExcludeFromBuild">rule C.ExcludeFromBuild TARGET : SOURCES</a> is ignored.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The targets to archive <code>SOURCES</code> into. The target name is given without extension; a platform specific extension will be generated. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SOURCES</td><td>The list of <code>.cpp</code>, <code>.cxx</code>, and <code>.c</code> to link into the application. Object and compiled Windows resource files may also be passed with this list. </td></tr>
    <tr><td class="paramname">OPTIONS</td><td>(optional) The following options are available:</td></tr>
  </table>
  </dd>
</dl>
<p> <blockquote>  </p><ul>
<li>
<code>shared</code> - Instead of building a static library (the default), a shared library (DLL) is built. </li>
</ul>
<p> </blockquote> </p>
<p> <blockquote>  If <code>shared</code> is specified for <code>OPTIONS</code>, the following additional options are available:</p>
<ul>
<li>
<code>console</code> (default) - Builds a console application. For Visual C++, the DLL is linked with <code>/SUBSYSTEM:CONSOLE</code>. </li>
<li>
<code>nodefaults</code> - Avoid adding /SUBSYSTEM to the link flags. </li>
<li>
<code>noexportlib</code> - Don't write out an export library. </li>
<li>
<code>nomanifest</code> - Don't embed a manifest. </li>
<li>
<code>regserver</code> - On Windows, <b>regsvr32</b> is run during the build to automatically register the DLL with the system. When cleaning, <b>regsvr32 /u </b>is run. </li>
<li>
<code>windows</code> - Forces a GUI application. For Visual C++, the DLL is linked with <code>/SUBSYSTEM:WINDOWS</code>. </li>
</ul>
<p> </blockquote> </p>
<dl class="section return"><dt>Returns</dt><dd>Returns the list of link targets, sometimes more than one, that will be built by the Jam. The target list may be passed to another rule like <a class="el" href="module_c.html#rule_C_LinkLibraries">rule C.LinkLibraries TARGET : LIBRARIES [ : OPTIONS ]</a>.</dd></dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Build a static library called mystaticlibrary from the sources</span></div>
<div class="line"><span class="preprocessor"># file1.c and file2.cpp.</span></div>
<div class="line">C.Library mystaticlibrary : file1.c file2.cpp ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Build a shared library called mystaticlibrary from the sources</span></div>
<div class="line"><span class="preprocessor"># file3.c and file4.cpp.</span></div>
<div class="line"><span class="preprocessor">C.Library mysharedlibrary : file3.c file4.cpp : shared ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_LinkDirectories"></a>
rule C.LinkDirectories TARGET : DIRECTORIES</h1>
<p><a name="a119_rule_C_LinkDirectories"></a></p>
<p>Assign the linker search <code>DIRECTORIES</code> for the given project <code>TARGET</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to assign the link <code>DIRECTORIES</code> to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. If <code>TARGET</code> is <code>*</code>, the defines are made available globally. </td></tr>
    <tr><td class="paramname">DIRECTORIES</td><td>The list of link directories to apply. Absolute paths are used directly. Relative paths are local to <code>$(SUBDIR)</code>. That is, they are relative to the subdirectory specified via <a class="el" href="jambase_rules.html#rule_SubDir">SubDir</a>.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Add c:/some/directory to myproject for all configurations and</span></div>
<div class="line"><span class="preprocessor"># all platforms.</span></div>
<div class="line">C.LinkDirectories myproject : c:/some/directory ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Add the MFC link directory.</span></div>
<div class="line">C.LinkDirectories myproject : <span class="stringliteral">&quot;$(MSVCNT)/atlmfc/lib&quot;</span> ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Relative path:</span></div>
<div class="line"><span class="preprocessor">C.LinkDirectories myproject : ../lib ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_LinkFlags"></a>
rule C.LinkFlags TARGET : FLAGS</h1>
<p><a name="a120_rule_C_LinkFlags"></a></p>
<p>Assign extra link <code>FLAGS</code> to the given project <code>TARGET</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to assign the link <code>FLAGS</code> to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. If <code>TARGET</code> is <code>*</code>, the flags are made available globally. </td></tr>
    <tr><td class="paramname">FLAGS</td><td>The list of link flags to apply.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> $(C.CONFIG) = debug {</div>
<div class="line">    C.LinkFlags ManagedLuaPlus : /DELAYLOAD:LuaPlus_1100.debug.dll : debug ;</div>
<div class="line">} <span class="keywordflow">else</span> <span class="keywordflow">if</span> $(C.CONFIG) = release {</div>
<div class="line">    C.LinkFlags ManagedLuaPlus : /DELAYLOAD:LuaPlus_1100.dll : release ;</div>
<div class="line">}</div>
<div class="line">C.LinkFlags ManagedLuaPlus : /KEYFILE:\<span class="stringliteral">&quot;$(SEARCH_SOURCE)/ManagedLuaPlus.snk\&quot; ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_LinkLibraries"></a>
rule C.LinkLibraries TARGET : LIBRARIES [ : OPTIONS ]</h1>
<p><a name="a121_rule_C_LinkLibraries"></a></p>
<p>Makes <code>TARGET</code> depend on Jam generated <code>LIBRARIES</code> and includes them during linking.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to link <code>LIBRARIES</code> to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">LIBRARIES</td><td>The list of libraries to apply. These libraries are those generated from the <a class="el" href="module_c.html#rule_C_Library">rule C.Library TARGET : SOURCES [ : OPTIONS ]</a> rule. They do not include prebuilt libraries. To link prebuilt libraries, use the <a class="el" href="module_c.html#rule_C_LinkPrebuiltLibraries">rule C.LinkPrebuiltLibraries TARGET : LIBRARIES [ : OPTIONS ]</a> rule. </td></tr>
    <tr><td class="paramname">OPTIONS</td><td>If <code>public</code> is specified, the libraries specified by <code>LIBRARIES</code> are made available to a project using <code>C.Inherits</code>.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">C.LinkLibraries Misc : zlib : public ;</div>
<div class="line">C.LinkLibraries MiniApp : Application LuaPlusStatic Misc ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_LinkPrebuiltLibraries"></a>
rule C.LinkPrebuiltLibraries TARGET : LIBRARIES [ : OPTIONS ]</h1>
<p><a name="a122_rule_C_LinkPrebuiltLibraries"></a></p>
<p>Makes <code>TARGET</code> depend on <code>LIBRARIES</code> and includes them during linking.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to link <code>LIBRARIES</code> to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">LIBRARIES</td><td>The list of libraries to apply. These libraries are prebuilt libraries, such as kernel32.lib, and are specified without an extension. For those libraries generated from the <a class="el" href="module_c.html#rule_C_Library">rule C.Library TARGET : SOURCES [ : OPTIONS ]</a> rule, use the <a class="el" href="module_c.html#rule_C_LinkLibraries">rule C.LinkLibraries TARGET : LIBRARIES [ : OPTIONS ]</a> rule. </td></tr>
    <tr><td class="paramname">OPTIONS</td><td>If <code>public</code> is specified, the libraries specified by <code>LIBRARIES</code> are made available to a project using <code>C.Inherits</code>.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">C.LinkPrebuiltLibraries MiniApp : advapi32 gdi32 ole32 shell32 user32 ;</div>
<div class="line"> </div>
<div class="line">C.LinkPrebuiltLibraries Misc : advapi32 shell32 user32 : public ;</div>
<div class="line">C.Inherits MiniApp : Misc ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_Lump"></a>
rule C.Lump PARENT : SOURCES_VARIABLE_NAME : LUMP_NAME [ : PCH_FILENAMES : EXTRA_INCLUDE_PATHS ]</h1>
<p><a name="a123_rule_C_Lump"></a></p>
<p>Generates a small file containing an <code>#include</code> amalgamation of files passed into the rule.</p>
<p>The name of the generated lump file is <code>$(LOCATE_SOURCE)/!$(LUMP_NAME)!.$(LUMP_NAME:S)</code>. If <code>LUMP_NAME</code> does not have an extension, then the extension from $(PCH_FILENAMES[1]:S) is used. If that doesn't exist, then the default is <code>.cpp</code>.</p>
<p>The lump file has the following contents:</p>
<ol>
<li>
If a precompiled header is specified through <code>PCH_FILENAMES</code>, a <code>#include "\$(PCH_FILENAMES[1])"</code> line is added to the lump file. </li>
<li>
For each C-style source specified in <code>SOURCES_VARIABLE_NAME</code> that is not excluded from the build via <a class="el" href="module_c.html#rule_C_ExcludeFromBuild">rule C.ExcludeFromBuild TARGET : SOURCES</a>, a <code>#include "filename"</code> is added to the lump file. </li>
</ol>
<p>Lumping may be turned off globally by setting the global variable <code>LUMP</code> to be <code>0</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">PARENT</td><td>The parent target to which the lump file belongs. <code>PARENT</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SOURCES_VARIABLE_NAME</td><td>The variable name listing the source files to be added to the lump. This is not an expanded version through <code>$(SRCS)</code> but rather, it is the actual name of the variable, <code>SRCS</code>. On return from the <code>Lump</code> rule, <code>SOURCES_VARIABLE_NAME</code> will be populated with the gristed name of the lump file. It will not contain the original file list anymore. It may include the precompiled header source filename $(PCH_FILENAMES[1]) if $(PCH_FILENAMES[3]) is set. </td></tr>
    <tr><td class="paramname">PCH_FILENAMES</td><td>(optional) <code>PCH_FILENAMES</code>[1] is the filename of the precompiled header source file (generally, the .cpp). <code>PCH_FILENAMES</code>[2] is the filename of the precompiled header's header file. If <code>PCH_FILENAMES</code>[2] is not specified, then <code>$(PCH_FILENAMES[1]:S=.h)</code> is used. Finally, if <code>PCH_FILENAMES</code>[3] is set to <code>1</code>, the precompiled header's source file (set through <code>PCH_FILENAMES</code>[1]) is added to the <code>SOURCES_VARIABLE_NAME</code> list. </td></tr>
    <tr><td class="paramname">EXTRA_INCLUDE_PATHS</td><td>If additional include paths are needed for this lump file, specify them here.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># For the Misc target, use the contents of SRCS to build a lump called</span></div>
<div class="line"><span class="preprocessor"># MiscLump.cpp.  In addition, this lump should use the precompiled header file</span></div>
<div class="line"><span class="preprocessor"># Misc_InternalPch.h, filtering any references to Misc_InternalPch.cpp out of</span></div>
<div class="line"><span class="preprocessor"># its file lists.  Since 1 is specified as the third string item of the</span></div>
<div class="line"><span class="preprocessor"># PCH_FILENAMES parameter, Misc_InternalPch.cpp is added to the SRCS list.</span></div>
<div class="line">C.Lump Misc : SRCS : MiscLump.cpp : Misc_InternalPch.cpp Misc_InternalPch.h 1 ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># A separate lump in the Misc target is made for PNG_SRCS.  It doesn&#39;t have</span></div>
<div class="line"><span class="preprocessor"># a precompiled header, and it will be generated as a .c file.</span></div>
<div class="line"><span class="preprocessor">C.Lump Misc : PNG_SRCS : PNGLump.c ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_NoPrecompiledHeader"></a>
rule C.NoPrecompiledHeader TARGET : FILES</h1>
<p><a name="a124_rule_C_NoPrecompiledHeader"></a></p>
<p>Creates a precompiled header and uses it on the specified <code>FILES</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to which the precompiled header belongs. This is needed to properly grist the precompiled header filenames. If not specified, <code>TARGET</code> defaults to the active target set via <a class="el" href="jambase_rules.html#rule_ActiveTarget">ActiveTarget</a>. </td></tr>
    <tr><td class="paramname">FILES</td><td>The list of files to turn off precompiled header support for.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">PCH_SRCS =</div>
<div class="line"><span class="preprocessor">    # Some files...</span></div>
<div class="line">    file_no_pch.c</div>
<div class="line"><span class="preprocessor">    # More files...</span></div>
<div class="line">;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># For all sources in PCH_SRCS in the Misc project, the precompiled header</span></div>
<div class="line"><span class="preprocessor"># will be set to Misc_InternalPch.h.  The precompiled header file is created</span></div>
<div class="line"><span class="preprocessor"># from Misc_InternalPch.cpp.</span></div>
<div class="line">C.PrecompiledHeader Misc : Misc_InternalPch : $(PCH_SRCS) ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Turn off the precompiled header for one of the files that had PCH support</span></div>
<div class="line"><span class="preprocessor"># added.</span></div>
<div class="line"><span class="preprocessor">C.NoPrecompiledHeader Misc : file_no_pch.c ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_ObjectAddFlags"></a>
rule C.ObjectAddFlags TARGET : SOURCES : FLAGS</h1>
<p><a name="a125_rule_C_ObjectAddFlags"></a></p>
<p>For the given <code>SOURCES</code>, add the compilation <code>FLAGS</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target containing the <code>SOURCES</code>. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SOURCES</td><td>The list of sources to add the <code>FLAGS</code> to. </td></tr>
    <tr><td class="paramname">FLAGS</td><td>The list of flags to add.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">C.ObjectAddFlags : myfile.cpp yourfile.cpp : -g ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_ObjectCFlags"></a>
rule C.ObjectCFlags TARGET : SOURCES : FLAGS</h1>
<p><a name="a126_rule_C_ObjectCFlags"></a></p>
<p>For the given <code>SOURCES</code> matching <code>*.c</code>, assign the passed in <code>FLAGS</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target containing the <code>SOURCES</code>. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SOURCES</td><td>The list of sources to assign the <code>FLAGS</code> to. </td></tr>
    <tr><td class="paramname">FLAGS</td><td>The list of flags to apply.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Assign /clr:oldsyntax to all C files in managedapp across all</span></div>
<div class="line"><span class="preprocessor"># configurations and platforms.</span></div>
<div class="line"><span class="preprocessor">C.ObjectCFlags managedapp : somefile.c : /clr:oldsyntax ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_ObjectCppFlags"></a>
rule C.ObjectC++Flags TARGET : SOURCES : FLAGS</h1>
<p><a name="a127_rule_C_ObjectCppFlags"></a></p>
<p>For the given <code>SOURCES</code> matching *.cpp or *.cxx, assign the passed in <code>FLAGS</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target containing the <code>SOURCES</code>. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SOURCES</td><td>The list of sources to assign the <code>FLAGS</code> to. </td></tr>
    <tr><td class="paramname">FLAGS</td><td>The list of flags to apply.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Assign /clr:oldsyntax to all C files in managedapp across all</span></div>
<div class="line"><span class="preprocessor"># configurations and platforms.</span></div>
<div class="line"><span class="preprocessor">C.ObjectC++Flags managedapp : somefile.cpp : /clr:oldsyntax ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_ObjectDefines"></a>
rule C.ObjectDefines TARGET : SOURCES : DEFINES</h1>
<p><a name="a128_rule_C_ObjectDefines"></a></p>
<p>For the given <code>SOURCES</code>, assign the passed in <code>DEFINES</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target containing the <code>SOURCES</code>. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SOURCES</td><td>The list of sources to assign the <code>DEFINES</code> to. </td></tr>
    <tr><td class="paramname">DEFINES</td><td>The list of defines to apply.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Make #defines available for ABC and DEF=5 in someproject&#39;s justafile.cpp</span></div>
<div class="line"><span class="preprocessor"># for all configurations and all platforms.</span></div>
<div class="line"><span class="preprocessor">C.ObjectDefines someproject : justafile.cpp : ABC DEF=5 ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_ObjectForceInclude"></a>
rule C.ObjectForceInclude TARGET : SOURCES : INCLUDES</h1>
<p><a name="a129_rule_C_ObjectForceInclude"></a></p>
<p>For the given <code>SOURCES</code>, assign the <code>INCLUDES</code> to the <code>TARGET</code>, causing that project's compilation to force the inclusion of the header before anything else.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target containing the <code>SOURCES</code>. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SOURCES</td><td>The list of sources to assign the force include flag to. </td></tr>
    <tr><td class="paramname">INCLUDES</td><td>The list of header files to force include.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Automatically #include ../common/print.h in libA.cpp.</span></div>
<div class="line"><span class="preprocessor">C.ObjectForceInclude libA : libA.cpp : ../common/print.h ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_ObjectIncludeDirectories"></a>
rule C.ObjectIncludeDirectories TARGET : SOURCE : INCLUDEPATHS</h1>
<p><a name="a130_rule_C_ObjectIncludeDirectories"></a></p>
<p>For the given <code>SOURCES</code>, assign the <code>INCLUDEPATHS</code> as part of the <code>TARGET</code> compilation of the <code>SOURCES</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target containing the <code>SOURCES</code>. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SOURCES</td><td>The list of sources to assign the include paths to. </td></tr>
    <tr><td class="paramname">INCLUDEPATHS</td><td>The list of include paths to apply.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Add $(Code)/Shared to myproject&#39;s somefile.cpp for all configurations</span></div>
<div class="line"><span class="preprocessor"># and all platforms.</span></div>
<div class="line"><span class="preprocessor">C.ObjectIncludeDirectories myproject : somefile.cpp : $(Code)/Shared ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_ObjectRemoveFlags"></a>
rule C.ObjectRemoveFlags TARGET : SOURCES : FLAGS</h1>
<p><a name="a131_rule_C_ObjectRemoveFlags"></a></p>
<p>For the given <code>SOURCES</code>, remove the compilation <code>FLAGS</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target containing the <code>SOURCES</code>. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SOURCES</td><td>The list of sources to remove the <code>FLAGS</code> from. </td></tr>
    <tr><td class="paramname">FLAGS</td><td>The list of flags to remove.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">C.ObjectRemoveFlags : myfile.cpp yourfile.cpp : -g ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_OutputName"></a>
rule C.OutputName TARGET : NAME</h1>
<p><a name="a132_rule_C_OutputName"></a></p>
<p>By default, the name of a generated executable or library is determined by the name of the <code>TARGET</code>. <code>OutputName</code> is used to override the name of the executable or library.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to affect the output name change on. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">NAME</td><td>The new name of the output target.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Change the name of the LuaPlusShared target to LuaPlus_1100.  When</span></div>
<div class="line"><span class="preprocessor"># the shared library is created, the name on disk will be LuaPlus_1100.dll.</span></div>
<div class="line"><span class="preprocessor">C.OutputName LuaPlusShared : LuaPlus_1100 ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_OutputPath"></a>
rule C.OutputPath TARGET : OUTPUTPATH</h1>
<p><a name="a133_rule_C_OutputPath"></a></p>
<p>By default, the output location of a generated executable or library is at <code>LOCATE_TARGET</code>. <code>OutputPath</code> is used to override the output location of the executable or library.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to affect the output path change on. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">OUTPUTPATH</td><td>The new output location of the generated target.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Change the name of the LuaPlusShared target to LuaPlus_1100.  When</span></div>
<div class="line"><span class="preprocessor"># the shared library is created, the name on disk will be LuaPlus_1100.dll.</span></div>
<div class="line"><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"># Also change the output location of the generated DLL.</span></div>
<div class="line">C.OutputName LuaPlusShared : LuaPlus_1100 ;</div>
<div class="line">C.OutputPath LuaPlusShared : <span class="stringliteral">&quot;c:/Program Files/LuaPlus&quot;</span> ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_OutputPostfix"></a>
rule C.OutputPostfix TARGET : POSTFIX</h1>
<p><a name="a134_rule_C_OutputPostfix"></a></p>
<p>The output postfix is appended to the end of the generated target name. By default, the output postfix is empty. This means the resultant filename is $(OUTPUTNAME).$(EXT).</p>
<p>If there is no assigned output postfix for <code>TARGET</code>, then the global target <code>*</code> is checked for a postfix.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to affect the output path change on. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">POSTFIX</td><td>The new output postfix of the generated target.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Change the name of the LuaPlusShared target to LuaPlus_1100.  When</span></div>
<div class="line"><span class="preprocessor"># the shared library is created, the name on disk will be LuaPlus_1100.dll.</span></div>
<div class="line"><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"># Also change the output location of the generated DLL.</span></div>
<div class="line"><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"># Generate the postfix as follows:</span></div>
<div class="line"><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor">#   * For debug:   LuaPlus_1100.debug.dll</span></div>
<div class="line"><span class="preprocessor">#   * For release: LuaPlus_1100.dll</span></div>
<div class="line">C.OutputName LuaPlusShared : LuaPlus_1100 ;</div>
<div class="line">C.OutputPath LuaPlusShared : <span class="stringliteral">&quot;c:/Program Files/LuaPlus&quot;</span> ;</div>
<div class="line"><span class="keywordflow">if</span> $(C.CONFIG) = debug {</div>
<div class="line">    C.OutputPostfix LuaPlusShared : .debug ;</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_OutputPostfixClear"></a>
rule C.OutputPostfixClear TARGET</h1>
<p><a name="a135_rule_C_OutputPostfixClear"></a></p>
<p>Clear the output postfix.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to affect the output path change on. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> $(C.CONFIG) = debug {</div>
<div class="line">    C.OutputPostfix LuaPlusShared : .debug ;</div>
<div class="line">    C.OutputPostfixClear LuaPlusShared ;</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_OutputSuffix"></a>
rule C.OutputSuffix TARGET : SUFFIX</h1>
<p><a name="a136_rule_C_OutputSuffix"></a></p>
<p>The output suffix is the file extension of the generated target. By default, the output suffix is appropriate for an executable or library.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to affect the output suffix change on. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">SUFFIX</td><td>The new output suffix of the generated target.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># The final name will be SomePlugin.appplugin.</span></div>
<div class="line"><span class="preprocessor">C.OutputSuffix SomePlugin : .appplugin ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_OverrideToolchainSpec"></a>
rule C.OverrideToolchainSpec TOOLCHAIN_SPEC_OPTIONS : OPTIONS</h1>
<p><a name="a137_rule_C_OverrideToolchainSpec"></a></p>
<p>Advanced functionality used when setting up overlay toolchains.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TOOLCHAIN_SPEC_OPTIONS</td><td>TBD </td></tr>
    <tr><td class="paramname">OPTIONS</td><td>TBD</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># From samples/newplatforms/jam/c/toolchain/win32dx.jam:</span></div>
<div class="line">rule C.Toolchain.win32dx.* {</div>
<div class="line"><span class="preprocessor">    # This feels like a complete hack, but the internals of the win32 toolchain</span></div>
<div class="line"><span class="preprocessor">    # use $(C.PLATFORM) to make decisions about what to include next.</span></div>
<div class="line"><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor">    # Since we&#39;re using a custom platform that JamPlus does not understand by</span></div>
<div class="line"><span class="preprocessor">    # default, we work around that by telling JamPlus we are using win32 as a</span></div>
<div class="line"><span class="preprocessor">    # platform.  After the toolchain is loaded, we force the platform back to</span></div>
<div class="line"><span class="preprocessor">    # the intended one.</span></div>
<div class="line">    C.OverrideToolchainSpec C.PLATFORM=win32 ;</div>
<div class="line">    C.Toolchain.win32.* ;</div>
<div class="line">    C.OverrideToolchainSpec C.PLATFORM=win32 : remove ;</div>
<div class="line"> </div>
<div class="line">    C.Defines * : PLATFORM_WIN32DX ;</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_PrecompiledHeader"></a>
rule C.PrecompiledHeader TARGET : NAME : FILES</h1>
<p><a name="a138_rule_C_PrecompiledHeader"></a></p>
<p>Creates a precompiled header based around <code>NAME</code> and uses it on the specified <code>FILES</code>.</p>
<p>Under Visual C++, <code>NAME.cpp</code> is expected to exist as part of the build. If <code>NAME.cpp</code> is not provided by the user, JamPlus will create an empty one automatically tied to the <code>.cpp</code> extension. If another extension is desired, the first parameter to <code>NAME</code> should be the alternate filename.</p>
<p>Under GCC-based compilers, the precompiled header name is automatic based on the flags and file extensions going into the build.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to which the precompiled header belongs. This is needed to properly grist the precompiled header filenames. </td></tr>
    <tr><td class="paramname">NAME</td><td>This parameter is made up of either one or two filenames. The first filename is the <code>.cpp</code> file used to create the precompiled header. If it does not contain an extension, <code>.cpp</code> is added. If the second filename is not specified, the default is to use the first filename with its suffix modified to <code>.h</code>. If the second filename is specified, it will represent the header file used for the precompilation. </td></tr>
    <tr><td class="paramname">FILES</td><td>The list of files to apply the precompiled header to.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># For all sources in PCH_SRCS in the Misc project, the precompiled header</span></div>
<div class="line"><span class="preprocessor"># will be set to Misc_InternalPch.h.  The precompiled header file is created</span></div>
<div class="line"><span class="preprocessor"># from Misc_InternalPch.cpp.</span></div>
<div class="line">C.PrecompiledHeader Misc : Misc_InternalPch : $(PCH_SRCS) ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># The precompiled header stdafx.h is applied to SRCS.  stdafx.cpp is used</span></div>
<div class="line"><span class="preprocessor"># to create the precompiled header.</span></div>
<div class="line"><span class="preprocessor">C.PrecompiledHeader SimpleMFC : stdafx.cpp stdafx.h : $(SRCS) ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_RemoveFlags"></a>
rule C.RemoveFlags TARGET : FLAGS</h1>
<p><a name="a139_rule_C_RemoveFlags"></a></p>
<p>For the given project <code>TARGET</code>, remove the compilation <code>FLAGS</code> from the current toolchain.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to remove the <code>FLAGS</code> from. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. If <code>TARGET</code> is <code>*</code>, the flags are made available globally. </td></tr>
    <tr><td class="paramname">FLAGS</td><td>The list of flags to remove.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">C.RemoveFlags : -g ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_RuntimeType"></a>
rule C.RuntimeType TARGET : TYPE [ : THE_PLATFORM ]</h1>
<p><a name="a140_rule_C_RuntimeType"></a></p>
<p>For the given project <code>TARGET</code>, alter the build to use either a statically linked C runtime or a dynamically linked C runtime.</p>
<dl class="section note"><dt>Note</dt><dd>At this time, the C runtime type only affects Visual C++ applications.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to assign the new C runtime to. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. If <code>TARGET</code> is <code>*</code>, the C runtime is changed globally. </td></tr>
    <tr><td class="paramname">TYPE</td><td>May be set to either <code>static</code> or <code>dynamic</code>. Use <code>static</code> to select a statically linked C runtime. Use <code>dynamic</code> to dynamically link against the C runtime. </td></tr>
    <tr><td class="paramname">THE_PLATFORM</td><td>(optional) If not specified, the default is the current platform.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="preprocessor"># Use the statically linked C runtime for all targets.</span></div>
<div class="line">C.RuntimeType * : static ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Use the dynamically linked C runtime for the helloworld target.</span></div>
<div class="line"><span class="preprocessor">C.RuntimeType helloworld : dynamic ;</span></div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_C_Toolchain"></a>
rule C.Toolchain TOOLCHAIN_SPEC</h1>
<p><a name="a141_rule_C_Toolchain"></a></p>
<p>Activate the toolchain specified by <code>TOOLCHAIN_SPEC</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TOOLCHAIN_SPEC</td><td>The toolchain to activate.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">C.Toolchain win32/debug ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_LocateSource"></a>
rule LocateSource TARGET : DIRECTORY</h1>
<p><a name="a142_rule_LocateSource"></a></p>
<p>Helper function to set <code>LOCATE_SOURCE</code> on <code>TARGET</code> to <code>DIRECTORY</code> and to override the current global <code>LOCATE_SOURCE</code> provided from <a class="el" href="jambase_rules.html#rule_SubDir">rule SubDir TOP d1...dn : SUBNAME</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to do the processing within. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">DIRECTORY</td><td>The directory to use as the override.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">LocateSource test : some/directory ;</div>
</div><!-- fragment --><hr  />
 <h1><a class="anchor" id="rule_LocateTarget"></a>
rule LocateTarget TARGET : DIRECTORY</h1>
<p><a name="a143_rule_LocateTarget"></a></p>
<p>Helper function to set <code>LOCATE_TARGET</code> on <code>TARGET</code> to <code>DIRECTORY</code> and to override the current global <code>LOCATE_TARGET</code> provided from <a class="el" href="jambase_rules.html#rule_SubDir">rule SubDir TOP d1...dn : SUBNAME</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>The target to do the processing within. <code>TARGET</code> is optional if <a class="el" href="jambase_rules.html#rule_ActiveTarget">rule ActiveTarget TARGET</a> has been specified. </td></tr>
    <tr><td class="paramname">DIRECTORY</td><td>The directory to use as the override.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">LocateTarget test : some/directory ;</div>
</div><!-- fragment --><hr  />
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</body>
</html>

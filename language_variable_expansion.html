<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>JamPlus manual: Variable Expansion</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7 -->
<div class="contents">
<h1><a class="anchor" name="language_variable_expansion">Variable Expansion </a></h1>During parsing, <b>Jam</b> performs variable expansion on each token that is not a keyword or rule name. Such tokens with embedded variable references are replaced with zero or more tokens. Variable references are of the form $(<em>v</em>) or $(<em>vm</em>), where <em>v</em> is the variable name, and <em>m</em> are optional modifiers.<p>
Variable expansion in a rule's actions is similar to variable expansion in statements, except that the action string is tokenized at whitespace regardless of quoting.<p>
The result of a token after variable expansion is the <em>product</em> of the components of the token, where each component is a literal substring or a list substituting a variable reference. For example:<p>
<table width="75%" align="center" border="1" cellspacing="3" cellpadding="3">
<tr>
<td><code> <br>
$(X) -&gt; a b c <br>
t$(X) -&gt; ta tb tc <br>
$(X)z -&gt; az bz cz <br>
$(X)-$(X) -&gt; a-a a-b a-c b-a b-b b-c c-a c-b c-c </code>  </td></tr>
</table>
<p>
The variable name and modifiers can themselves contain a variable reference, and this partakes of the product as well:<p>
<table width="75%" align="center" border="1" cellspacing="3" cellpadding="3">
<tr>
<td><code> <br>
$(X) -&gt; a b c <br>
$(Y) -&gt; 1 2 <br>
$(Z) -&gt; X Y <br>
$($(Z)) -&gt; a b c 1 2</code><p>
<code> </code>  </td></tr>
</table>
<p>
Because of this product expansion, if any variable reference in a token is undefined, the result of the expansion is an empty list. If any variable element is a null string, the result propagates the non-null elements:<p>
<table width="75%" align="center" border="1" cellspacing="3" cellpadding="3">
<tr>
<td><code> <br>
$(X) -&gt; a "" <br>
$(Y) -&gt; "" 1 <br>
$(Z) -&gt; <br>
*$(X)$(Y)* -&gt; *a* *a1* ** *1* <br>
*$(X)$(Z)* -&gt;</code><p>
<code> </code>  </td></tr>
</table>
<p>
A variable element's string value can be parsed into grist and filename-related components. Modifiers to a variable are used to select elements, select components, and replace components. Modifiers are applied in the order of the table below:<p>
<table width="75%" border="1" align="center" cellspacing="3" cellpadding="3">
<tr>
<td><code> [<em>n</em>] </code> </td><td>Select element number <em>n</em> (starting at 1). If the variable contains fewer than <em>n</em> elements, the result is a zero-element list.  </td></tr>
<tr>
<td><code> [<em>n</em>-<em>m</em>] </code> </td><td>Select elements number <em>n</em> through <em>m</em>.  </td></tr>
<tr>
<td><code> [<em>n</em>-] </code> </td><td>Select elements number <em>n</em> through the last.  </td></tr>
<tr>
<td><code> :E=<em>value</em> </code> </td><td>Use <em>value</em> instead if the variable is unset. Note that <code>:E=</code> by itself doesn't mean anything.  </td></tr>
<tr>
<td><code> :A </code> </td><td>Expand a variable expansion within a string. When a string has been read from an external source and contains a variable in <code></code> or <code>@(var)</code> syntax, the <code>:A</code> modifier can be used to expand it as if it had been inline in the Jam script.  </td></tr>
<tr>
<td><code> :W=<em>wildcard</em> </code> </td><td>Populate the list with directory contents matching <em>wildcard</em>.  </td></tr>
<tr>
<td><code> :T </code> </td><td>Expand bound name.  </td></tr>
<tr>
<td><code> :B </code> </td><td>Select filename base.  </td></tr>
<tr>
<td><code> :B=<em>base</em> </code> </td><td>Replace the base part of file name with <em>base</em>.  </td></tr>
<tr>
<td><code> :S </code> </td><td>Select (last) filename suffix.  </td></tr>
<tr>
<td><code> :S=<em>suf</em> </code> </td><td>Replace the suffix of file name with <em>suf</em>.  </td></tr>
<tr>
<td><code> :M </code> </td><td>Select archive member name.  </td></tr>
<tr>
<td><code> :M=<em>mem</em> </code> </td><td>Replace the archive member name with <em>mem</em>.  </td></tr>
<tr>
<td><code> :D </code> </td><td>Select directory path.  </td></tr>
<tr>
<td><code> :D=<em>path</em> </code> </td><td>Replace directory with <em>path</em>.  </td></tr>
<tr>
<td><code> :P </code> </td><td>Select parent directory. On VMS, $(var:P) is the parent directory of $(var:D); on Unix and NT, $(var:P) and $(var:D) are the same.  </td></tr>
<tr>
<td><code> :G </code> </td><td>Select grist.  </td></tr>
<tr>
<td><code> :G=<em>grist</em> </code> </td><td>Replace grist with <em>grist</em>.  </td></tr>
<tr>
<td><code> :R=<em>root</em> </code> </td><td>Prepend <em>root</em> to the whole file name, if not already rooted.  </td></tr>
<tr>
<td><code> :U </code> </td><td>Replace lowercase characters with uppercase.  </td></tr>
<tr>
<td><code> :L </code> </td><td>Replace uppercase characters with lowercase.  </td></tr>
<tr>
<td><code> :/ </code> </td><td>Convert all backslashes (\) to forward slashes (/).  </td></tr>
<tr>
<td><code> :\\ </code> </td><td>Convert all forward slashes (/) to backslashes (\).  </td></tr>
<tr>
<td><code> :<em>chars</em> </code> </td><td>Select the components listed in <em>chars</em>.  </td></tr>
<tr>
<td><code> :J=<em>joinval</em> </code> </td><td>Concatenate list elements into single element, separated by <em>joinval</em>.  </td></tr>
<tr>
<td><code> :I=<em>regex</em> </code> </td><td>Include all list items matching <em>regex</em>. Remove everything else.  </td></tr>
<tr>
<td><code> :X=<em>regex</em> </code> </td><td>Exclude all list items matching <em>regex</em>. Keep everything else.  </td></tr>
</table>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Oct 27 09:16:32 2008 for JamPlus manual by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7 </small></address>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>JamPlus manual: Built-in Rules</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7 -->
<div class="contents">
<h1><a class="anchor" name="builtin_rules">Built-in Rules </a></h1><h2><a class="anchor" name="builtin_rules_intro">
Introduction</a></h2>
<b>Jam</b> has a number built-in rules, all of which are pure procedure rules without updating actions. They are in three groups: the first builds the dependency graph; the second modifies it; and the third are just utility rules.<p>
<br>
<p>
 <center>  <h2><a class="anchor" name="language_built_in_rules_dependency_building">
Dependency Building</a></h2>
 </center> <p>
<multicol cols=3>
<ul>
<li><a href="builtin_rules.html#rule_Depends">Depends</a> <li><a href="builtin_rules.html#rule_Includes">Includes</a> <li><a href="builtin_rules.html#rule_Needs">Needs</a> </ul>
</multicol>
<p>
<hr>
 <h2><a class="anchor" name="rule_Depends">
rule Depends targets1 : targets2 [ : target3 ... targets9 ] ;</a></h2>
<p>
Builds a direct dependency: makes each of <em>targets1</em> depend on each of <em>targets2</em>. Generally, <em>targets1</em> will be rebuilt if <em>targets2</em> are themselves rebuilt are or are newer than <em>targets1</em>.<p>
As a simplification when specifying multi-level dependencies, <em>targets2</em> depend on the optional <em>targets3</em>, and so on.<p>
<hr>
 <h2><a class="anchor" name="rule_Includes">
rule Includes &lt;i&gt;targets1&lt;/i&gt; : &lt;i&gt;targets2&lt;/i&gt; [ : &lt;i&gt;target3&lt;/i&gt; ... &lt;i&gt;targets9&lt;/i&gt; ] ;</a></h2>
<p>
Builds a sibling dependency: makes any target that depends on any of <em>targets1</em> also depend on each of <em>targets2</em>. This reflects the dependencies that arise when one source file includes another: the object built from the source file depends both on the original and included source file, but the two sources files don't depend on each other. For example:<p>
<div class="fragment"><pre class="fragment">    Depends foo.o : foo.c ;
    Includes foo.c : foo.h ;
</pre></div><p>
"foo.o" depends on "foo.c" and "foo.h" in this example.<p>
As a simplification when specifying multi-level dependencies, <em>targets2</em> depend on the optional <em>targets3</em>, and so on.<p>
<hr>
 <h2><a class="anchor" name="rule_Needs">
rule Needs &lt;i&gt;targets1&lt;/i&gt; : &lt;i&gt;targets2&lt;/i&gt; [ : &lt;i&gt;target3&lt;/i&gt; ... &lt;i&gt;targets9&lt;/i&gt; ] ;</a></h2>
<p>
Needs is very similar to <a class="el" href="builtin_rules.html#rule_Depends">rule Depends targets1 : targets2 [ : target3 ... targets9 ] ;</a>. Like Depends, <em>targets1</em> are dependent on <em>targets2</em> having been built first. Unlike Depends, if <em>targets2</em> are updated, <em>targets1</em> do not build.<p>
As a simplification when specifying multi-level dependencies, <em>targets2</em> depend on the optional <em>targets3</em>, and so on.<p>
<br>
  <center>  <h2><a class="anchor" name="language_built_in_rules_modifying_binding">
Modifying Binding</a></h2>
 </center> <p>
The rules <a class="el" href="builtin_rules.html#rule_Always">Always</a>, <a class="el" href="builtin_rules.html#rule_Leaves">Leaves</a>, <a class="el" href="builtin_rules.html#rule_MightNotUpdate">MightNotUpdate</a>, <a class="el" href="builtin_rules.html#rule_NoCare">NoCare</a>, <a class="el" href="builtin_rules.html#rule_NotFile">NotFile</a>, <a class="el" href="builtin_rules.html#rule_NoUpdate">NoUpdate</a>, and <a class="el" href="builtin_rules.html#rule_Temporary">Temporary</a> modify the dependency graph so that <b>Jam</b> treats the targets differently during its target binding phase. See <a class="el" href="jam_language.html#operation_binding">Binding Phase</a> above. Normally, <b>Jam</b> updates a target if it is missing, if its filesystem modification time is older than any of its dependencies (recursively), or if any of its dependencies are being updated. This basic behavior can be changed by invoking the following rules:<p>
<multicol cols=3>
<ul>
<li><a href="builtin_rules.html#rule_Always">Always</a> <li><a href="builtin_rules.html#rule_Leaves">Leaves</a> <li><a href="builtin_rules.html#rule_MightNotUpdate">MightNotUpdate</a> <li><a href="builtin_rules.html#rule_NoCare">NoCare</a> <li><a href="builtin_rules.html#rule_NotFile">NotFile</a> <li><a href="builtin_rules.html#rule_NoUpdate">NoUpdate</a> <li><a href="builtin_rules.html#rule_Temporary">Temporary</a> </ul>
</multicol>
<p>
<hr>
 <h2><a class="anchor" name="rule_Always">
rule Always targets ;</a></h2>
<p>
Causes <em>targets</em> to be rebuilt regardless of whether they are up-to-date (they must still be in the dependency graph). This is used for the clean and uninstall targets, as they have no dependencies and would otherwise appear never to need building. It is best applied to targets that are also NotFile targets, but it can also be used to force a real file to be updated as well.<p>
<hr>
 <h2><a class="anchor" name="rule_Leaves">
rule Leaves targets ;</a></h2>
<p>
Makes each of <em>targets</em> depend only on its leaf sources, and not on any intermediate targets. This makes it immune to its dependencies being updated, as the "leaf" dependencies are those without their own dependencies and without updating actions. This allows a target to be updated only if original source files change.<p>
<hr>
 <h2><a class="anchor" name="rule_MightNotUpdate">
rule MightNotUpdate targets ;</a></h2>
<p>
Some targets may or may not update when their action is executed, such as export libraries for a Windows DLL. In order for <b>Jam</b> to process this behavior appropriately, the <em>targets</em> must be marked so their timestamps will be evaluated at the latest possible time during the <a class="el" href="jam_language.html#operation_updating">Updating Phase</a>.<p>
<hr>
 <h2><a class="anchor" name="rule_NoCare">
rule NoCare targets ;</a></h2>
<p>
Causes <b>Jam</b> to ignore <em>targets</em> that neither can be found nor have updating actions to build them. Normally for such targets <b>Jam</b> issues a warning and then skips other targets that depend on these missing targets. The HdrRule in Jambase uses NoCare on the header file names found during header file scanning, to let <b>Jam</b> know that the included files may not exist. For example, if a #include is within an #ifdef, the included file may not actually be around.<p>
<hr>
 <h2><a class="anchor" name="rule_NotFile">
rule NotFile targets ;</a></h2>
<p>
Marks <em>targets</em> as pseudotargets and not real files. No timestamp is checked, and so the actions on such a target are only executed if the target's dependencies are updated, or if the target is also marked with Always. The default <b>jam</b> target "all" is a pseudotarget. In Jambase, NotFile is used to define several addition convenient pseudotargets.<p>
<hr>
 <h2><a class="anchor" name="rule_NoUpdate">
rule NoUpdate targets ;</a></h2>
<p>
Causes the timestamps on <em>targets</em> to be ignored. This has two effects: first, once the target has been created it will never be updated; second, manually updating target will not cause other targets to be updated. In Jambase, for example, this rule is applied to directories by the MkDir rule, because <a class="el" href="jambase_rules.html#rule_MkDir">rule MkDir DIRECTORY</a> only cares that the target directory exists, not when it has last been updated.<p>
<hr>
 <h2><a class="anchor" name="rule_Temporary">
rule Temporary targets ;</a></h2>
<p>
Marks <em>targets</em> as temporary, allowing them to be removed after other targets that depend upon them have been updated. If a Temporary target is missing, <b>Jam</b> uses the timestamp of the target's parent. Jambase uses Temporary to mark object files that are archived in a library after they are built, so that they can be deleted after they are archived.<p>
<br>
  <center>  <h2><a class="anchor" name="language_built_in_rules_utility_rules">
Utility Rules</a></h2>
 </center> <p>
The remaining rules are utility rules.<p>
<multicol cols=3>
<ul>
<li><a href="builtin_rules.html#rule_Echo">Echo</a> <li><a href="builtin_rules.html#rule_Exit">Exit</a> <li><a href="builtin_rules.html#rule_Glob">Glob</a> <li><a href="builtin_rules.html#rule_Match">Match</a> <li><a href="builtin_rules.html#rule_Math">Math</a> <li><a href="builtin_rules.html#rule_MD5">MD5</a> <li><a href="builtin_rules.html#rule_MD5File">MD5File</a> </ul>
</multicol>
<p>
<hr>
 <h2><a class="anchor" name="rule_Echo">
rule Echo ARGS ;</a></h2>
<p>
Prints out the message <code>ARGS</code> to stdout.<p>
<hr>
 <h2><a class="anchor" name="rule_Exit">
rule Exit ARGS ;</a></h2>
<p>
Blurts out the message <code>ARGS</code> to stdout and then exits with a failure status.<p>
<hr>
 <h2><a class="anchor" name="rule_Glob">
rule Glob DIRECTORIES : PATTERNS [ : PREPEND ] ;</a></h2>
<p>
Scans <code>DIRECTORIES</code> for files matching <code>PATTERNS</code>, returning the list of matching files (with directory prepended, unless the optional <code>PREPEND</code> is set to <code>0</code> or <code>false</code>). <code>PATTERNS</code> uses the same syntax as in the <a class="el" href="jam_language.html#statements_switch">switch</a> statement. Only useful within the <code>[ ]</code> construct, to change the result into a list.<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">    # Returns all files and directories.  Directories have a / appended.</span>
<span class="preprocessor"></span><span class="preprocessor">    # Directories . and .. are not returned.</span>
<span class="preprocessor"></span>    Glob bin : * ;

<span class="preprocessor">    # Returns just directories.</span>
<span class="preprocessor"></span>    Glob bin : */ ;

<span class="preprocessor">    # Returns just files without bin/ prepended.</span>
<span class="preprocessor">    Glob bin : *[^/] : 0;</span>
</pre></div><p>
<hr>
 <h2><a class="anchor" name="rule_Match">
rule Match REGEXPS : LIST ;</a></h2>
<p>
Matches the <b>egrep</b>(1) style regular expressions <code>REGEXPS</code> against the strings in <code>LIST</code>. The result is the concatenation of matching <code>()</code> subexpressions for each string in <code>LIST</code>, and for each regular expression in <code>REGEXPS</code>. Only useful within the <code>[ ]</code> construct, to change the result into a list.<p>
<hr>
 <h2><a class="anchor" name="rule_Math">
rule Math LEFT OPERATOR RIGHT ;</a></h2>
<p>
Calculates the result of the simple math equation. Only useful within the <code>[ ]</code> construct, to change the result into a list.<p>
FILL ME IN **<p>
<hr>
 <h2><a class="anchor" name="rule_MD5">
rule MD5 LIST [ : LIST2 ... ] ;</a></h2>
<p>
Calculates the md5sum of all lists and their respective list elements. Each list element is separated with one NUL character, so that <code>[ MD5 a b ]</code> is different than <code>[ MD5 ab ]</code>. Each list is separated with two NUL characters so that <code>[ MD5 a : b ]</code> is different than <code>[ MD5 a b ]</code>. Only useful within the <code>[ ]</code> construct, to change the resultant md5sum into a list.<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">        # Prints d41d8cd98f00b204e9800998ecf8427e.</span>
<span class="preprocessor"></span>    Echo [ MD5 <span class="stringliteral">""</span> ] ;

<span class="preprocessor">        # Returns c3fcd3d76192e4007dfb496cca67e13b.</span>
<span class="preprocessor">    Echo [ MD5 "abcdefghijklmnopqrstuvwxyz" ] ;</span>
</pre></div><p>
<hr>
 <h2><a class="anchor" name="rule_MD5File">
rule MD5File FILENAME_LIST [ : FILENAME_LIST2 ... ] ;</a></h2>
<p>
Calculates the md5sum of all listed files. Only useful within the <code>[ ]</code> construct, to change the resultant md5sum into a list.<p>
<div class="fragment"><pre class="fragment">    Echo [ MD5File <span class="stringliteral">"myfile.txt"</span> ] ;
</pre></div><p>
<hr>
 </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Oct 28 23:35:01 2008 for JamPlus manual by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7 </small></address>
</body>
</html>
